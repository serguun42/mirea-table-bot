# mirea-table-bot
Telegram Bot for MIREA's Schedule


## Как работает

Работает на Node.js<br>
Необходимые модули:
* Telegraf
* node-fetch
* node-xlsx
* node-cron

Всего четыре файла:
* `mirea_table_bot.js`
* `mirea_table_bot.config.json` – конфиг для указания токена бота, админа бота, названия института и номера группы и прочего.
* `mirea_table_bot.users.json` – пользователи (см. пример в самом файле)
* `mirea_table_bot.fixes.json` – исправления опечаток из оригинального файла с расписанием (см. пример в самом файле)

В конфиге задаётся:
* ссылка страницы с расписанием (__не URL на сам `.xlsx`-файл__)
* unix-timestamp начала семестра (в мс)
* название факультета
* номер группы
* админ
* токен бота

В файле пользователей – массив объектов-пользователей с id (не username) и username – который необязательно username от Telegram, а __любой удобный для вас никнейм/алиас__. Список пользователей и файл с ними автоматически пополняется по команде /start от нового пользователя. Удалять надо вручную: тут ничего не поделаешь, Telegram такой.

В файле `fixes.json` – исправления опечаток.

## Команды

#### Установка всего необходимого
```
npm install
```

#### Запуск бота
```
npm run launch
```

#### Запуск по-другому
```
node ./mirea_table_bot.js
```
или
```
pm2 start ./mirea_table_bot.js
```
