# Bot has moved to [MSS Project](https://github.com/serguun42/mss)

![MSS](https://mirea.xyz/img/logo_wide.png)

# mirea-table-boty
Telegram Bot for MIREA's Schedule


## Как работает

Работает на Node.js, только для одной группы и без БД (относительно скоро масштабное обновление, stay tuned)
<br>
Необходимые модули (см. `package.json`):
* Telegraf
* node-fetch
* node-xlsx
* node-cron

Всего четыре файла:
* `mirea_table_bot.js`
* `mirea_table_bot.config.json` – конфиг для указания токена бота, админа бота, названия института и номера группы и прочего.
* `mirea_table_bot.users.json` – пользователи (см. пример в самом файле)
* `mirea_table_bot.fixes.json` – исправления опечаток из оригинального файла с расписанием (см. пример в самом файле)

В конфиге задаётся:
* ссылка страницы с расписанием (__не URL на сам `.xlsx`-файл__)
* unix-timestamp начала семестра (в мс)
* название факультета
* номер группы
* админ
* токен бота
* котики – использовать и, если да, то где папка с картинками

В файле пользователей – массив объектов-пользователей с id (не username) и username – который необязательно username от Telegram, а __любой удобный для вас никнейм/алиас__. Список пользователей и файл с ними автоматически пополняется по команде /start от нового пользователя; удалять можно вручную, однако пользователь уберётся из списка, если чат с ботом был остановлен (или заблокирован).

В файле `fixes.json` – исправления опечаток.

## Команды

#### Установка всего необходимого
```
npm install
```

#### Запуск бота
```
npm run launch
```

#### Запуск по-другому
```
node ./mirea_table_bot.js
```
или
```
pm2 start ./mirea_table_bot.js
```
